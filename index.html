<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Planet Locator</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body,
        html {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <a-scene embedded arjs>
        <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
        AFRAME.registerComponent('rotation-reader', {
            tick: function () {
                const rotation = this.el.object3D.rotation;
                console.log(`Rotation - x: ${rotation.x}, y: ${rotation.y}, z: ${rotation.z}`);
            }
        });

        async function getPlanetData() {
            const response = await fetch('https://api.le-systeme-solaire.net/rest/bodies/');
            const data = await response.json();
            return data.bodies.filter(body => body.isPlanet);
        }

        async function initAR() {
            const planets = await getPlanetData();
            const scene = document.querySelector('a-scene');

            planets.forEach(planet => {
                const planetEl = document.createElement('a-sphere');
                const lat = Math.random() * 180 - 90;  // 仮の緯度
                const lon = Math.random() * 360 - 180; // 仮の経度

                planetEl.setAttribute('gps-entity-place', `latitude: ${lat}; longitude: ${lon}`);
                planetEl.setAttribute('radius', 0.5);
                planetEl.setAttribute('color', 'blue');
                scene.appendChild(planetEl);
            });
        }

        window.onload = initAR;
    </script>
</body>

</html>